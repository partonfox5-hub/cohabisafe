<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personality Assessment - CohabiSafe</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header role="banner">
        <h1>Personality Compatibility</h1>
        <p class="progress-text">Step 3 of 6: Analyzing 5 Dimensions of Personality</p>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        <p id="progress-count" aria-live="polite">0 of 42 Answered</p>
    </header>

    <main id="main-content" role="main">
        <form id="quizForm" action="/quiz-submit" method="POST">
            
            <section class="quiz-section" aria-labelledby="openness-heading">
                <h2 id="openness-heading">Part 1: Openness</h2>
                <p class="section-desc">How you approach new ideas and experiences.</p>

                <div class="question-card" data-qid="o1" data-weight="1.0">
                    <label class="q-label">I enjoy exploring new ideas and concepts, even if they're unconventional.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="o1" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="o1" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="o1" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="o1" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="o1" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="o2" data-reverse="true" data-weight="1.2">
                    <label class="q-label">I prefer routine tasks over trying something new and different.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="o2" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="o2" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="o2" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="o2" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="o2" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="o3" data-weight="1.0">
                    <label class="q-label" for="o3-range">I have a vivid imagination and often daydream about possibilities.</label>
                    <div class="range-container">
                        <span class="range-label">Low Imagination</span>
                        <input type="range" id="o3-range" name="o3" min="1" max="10" value="5" oninput="updateOutput('o3-out', this.value)">
                        <span class="range-label">High Imagination</span>
                    </div>
                    <output id="o3-out">5</output>
                </div>

                <div class="question-card" data-qid="o4" data-weight="1.0">
                    <label class="q-label">Art and aesthetics matter a lot to me; I seek beauty in my surroundings.</label>
                    <div class="toggle-group">
                        <input type="radio" id="o4-no" name="o4" value="1" onclick="toggleText('o4-text', false)">
                        <label for="o4-no" class="toggle-btn">No</label>
                        
                        <input type="radio" id="o4-yes" name="o4" value="5" onclick="toggleText('o4-text', true)">
                        <label for="o4-yes" class="toggle-btn">Yes</label>
                    </div>
                    <textarea id="o4-text" name="o4_notes" class="conditional-text" placeholder="Explain why aesthetics matter to you..." style="display:none"></textarea>
                </div>

                <div class="question-card" data-qid="o5" data-weight="1.5"> <label class="q-label">I'm comfortable with ambiguity and change in my daily life.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="o5" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="o5" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="o5" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="o5" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="o5" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="o6" data-weight="1.0">
                    <label class="q-label">I like to explore abstract ideas that challenge my beliefs.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="o6" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="o6" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="o6" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="o6" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="o6" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="o7" data-weight="1.1">
                    <label class="q-label" for="o7-range">I find it exciting to learn about cultures different from my own.</label>
                    <div class="range-container">
                        <span class="range-label">Uninterested</span>
                        <input type="range" id="o7-range" name="o7" min="1" max="10" value="5" oninput="updateOutput('o7-out', this.value)">
                        <span class="range-label">Highly Excited</span>
                    </div>
                    <output id="o7-out">5</output>
                </div>

                <div class="question-card" data-qid="o8" data-reverse="true" data-weight="1.0">
                    <label class="q-label">Which approach do you prefer?</label>
                    <div class="toggle-group">
                        <input type="radio" id="o8-prac" name="o8" value="5"> <label for="o8-prac" class="toggle-btn">Practical Solutions</label>
                        
                        <input type="radio" id="o8-theo" name="o8" value="1"> <label for="o8-theo" class="toggle-btn">Theoretical Discussions</label>
                    </div>
                </div>
            </section>

            <section class="quiz-section" aria-labelledby="consc-heading">
                <h2 id="consc-heading">Part 2: Conscientiousness</h2>
                <p class="section-desc">Organization, reliability, and habits.</p>

                <div class="question-card" data-qid="c1" data-weight="2.0" style="border-left: 4px solid #4A90E2;">
                    <label class="q-label">I always follow a cleaning schedule, even if others slack.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="c1" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="c1" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="c1" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="c1" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="c1" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="c2" data-weight="1.5">
                    <label class="q-label" for="c2-range">I plan my tasks carefully to avoid last-minute rushes.</label>
                    <div class="range-container">
                        <span class="range-label">Spontaneous</span>
                        <input type="range" id="c2-range" name="c2" min="1" max="10" value="5" oninput="updateOutput('c2-out', this.value)">
                        <span class="range-label">Highly Planned</span>
                    </div>
                    <output id="c2-out">5</output>
                </div>

                <div class="question-card" data-qid="c3" data-reverse="true" data-weight="1.5">
                    <label class="q-label">I feel uneasy if I forget to complete something I promised.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="c3" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="c3" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="c3" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="c3" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="c3" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="c4" data-weight="2.0">
                    <label class="q-label">Which image best represents your ideal living space?</label>
                    <div class="image-select-group">
                        <label class="img-option">
                            <input type="radio" name="c4" value="5"> <div class="img-box">üõèÔ∏è</div>
                            <span>Minimalist & Spotless</span>
                        </label>
                        <label class="img-option">
                            <input type="radio" name="c4" value="3">
                            <div class="img-box">üõãÔ∏è</div>
                            <span>Lived-in & Cozy</span>
                        </label>
                        <label class="img-option">
                            <input type="radio" name="c4" value="1"> <div class="img-box">üìö</div>
                            <span>Clutter doesn't bother me</span>
                        </label>
                    </div>
                </div>

                <div class="question-card" data-qid="c5" data-weight="1.2">
                    <label class="q-label">I prioritize long-term goals over immediate pleasures.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="c5" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="c5" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="c5" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="c5" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="c5" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="c6" data-weight="1.3">
                    <label class="q-label">I double-check my work to ensure it's error-free.</label>
                    <div class="range-container">
                        <span class="range-label">Careless</span>
                        <input type="range" name="c6" min="1" max="10" value="5" oninput="updateOutput('c6-out', this.value)">
                        <span class="range-label">Meticulous</span>
                    </div>
                    <output id="c6-out">5</output>
                </div>

                <div class="question-card" data-qid="c7" data-weight="1.2">
                    <label class="q-label">I set specific goals for myself and stick to them.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="c7" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="c7" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="c7" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="c7" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="c7" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="c8" data-reverse="true" data-weight="1.5">
                    <label class="q-label">How do you handle deadlines?</label>
                    <div class="toggle-group">
                        <input type="radio" id="c8-proc" name="c8" value="5">
                        <label for="c8-proc" class="toggle-btn">I Procrastinate</label>
                        
                        <input type="radio" id="c8-prom" name="c8" value="1">
                        <label for="c8-prom" class="toggle-btn">I'm Prompt</label>
                    </div>
                </div>
            </section>

            <section class="quiz-section" aria-labelledby="extra-heading">
                <h2 id="extra-heading">Part 3: Extraversion</h2>
                <p class="section-desc">Social energy and interaction style.</p>

                <div class="question-card" data-qid="e1" data-weight="2.0">
                    <label class="q-label">I enjoy hosting game nights or movie marathons with roommates.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="e1" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="e1" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="e1" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="e1" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="e1" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="e2" data-weight="1.8">
                    <label class="q-label">How often do you prefer solo downtime vs. group hangs?</label>
                    <div class="range-container">
                        <span class="range-label">Always Solo</span>
                        <input type="range" name="e2" min="1" max="10" value="5" oninput="updateOutput('e2-out', this.value)">
                        <span class="range-label">Always Group</span>
                    </div>
                    <output id="e2-out">5</output>
                </div>

                <div class="question-card" data-qid="e3" data-weight="1.2">
                    <label class="q-label">I feel energized after social events with new people.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="e3" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="e3" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="e3" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="e3" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="e3" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="e4" data-reverse="true" data-weight="1.5">
                    <label class="q-label">What is your gathering preference?</label>
                    <div class="toggle-group">
                        <input type="radio" id="e4-small" name="e4" value="5">
                        <label for="e4-small" class="toggle-btn">Small & Intimate</label>
                        
                        <input type="radio" id="e4-large" name="e4" value="1">
                        <label for="e4-large" class="toggle-btn">Large Parties</label>
                    </div>
                </div>

                <div class="question-card" data-qid="e5" data-weight="1.0">
                    <label class="q-label">I often initiate conversations with strangers in social settings.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="e5" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="e5" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="e5" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="e5" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="e5" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="e6" data-weight="1.5">
                    <label class="q-label">I thrive in environments with lots of social interaction.</label>
                    <div class="range-container">
                        <span class="range-label">Introverted</span>
                        <input type="range" name="e6" min="1" max="10" value="5" oninput="updateOutput('e6-out', this.value)">
                        <span class="range-label">Extroverted</span>
                    </div>
                    <output id="e6-out">5</output>
                </div>

                <div class="question-card" data-qid="e7" data-weight="1.0">
                    <label class="q-label">Being the center of attention energizes me.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="e7" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="e7" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="e7" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="e7" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="e7" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="e8" data-weight="1.0">
                    <label class="q-label">Working Preference</label>
                    <div class="toggle-group">
                        <input type="radio" id="e8-solo" name="e8" value="1">
                        <label for="e8-solo" class="toggle-btn">Work Alone</label>
                        
                        <input type="radio" id="e8-team" name="e8" value="5">
                        <label for="e8-team" class="toggle-btn">Work in Teams</label>
                    </div>
                </div>
            </section>

            <section class="quiz-section" aria-labelledby="agree-heading">
                <h2 id="agree-heading">Part 4: Agreeableness</h2>
                <p class="section-desc">Cooperation, empathy, and conflict style.</p>

                <div class="question-card" data-qid="a1" data-weight="2.0">
                    <label class="q-label">I'd rather compromise on thermostat settings than argue.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="a1" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="a1" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="a1" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="a1" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="a1" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="a2" data-weight="1.5">
                    <label class="q-label">I go out of my way to help others, even if it's inconvenient.</label>
                    <div class="range-container">
                        <span class="range-label">Independent</span>
                        <input type="range" name="a2" min="1" max="10" value="5" oninput="updateOutput('a2-out', this.value)">
                        <span class="range-label">Highly Helpful</span>
                    </div>
                    <output id="a2-out">5</output>
                </div>

                 <div class="question-card" data-qid="a3" data-weight="1.5">
                    <label class="q-label">I find it easy to forgive people who have wronged me.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="a3" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="a3" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="a3" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="a3" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="a3" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="a4" data-weight="1.2">
                    <label class="q-label">Conflict Style</label>
                    <div class="toggle-group">
                        <input type="radio" id="a4-conf" name="a4" value="1">
                        <label for="a4-conf" class="toggle-btn">Direct/Confrontational</label>
                        
                        <input type="radio" id="a4-avoid" name="a4" value="5">
                        <label for="a4-avoid" class="toggle-btn">Avoidant/Peaceful</label>
                    </div>
                </div>

                <div class="question-card" data-qid="a5" data-weight="1.5">
                    <label class="q-label">I make an effort to get along with people I disagree with.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="a5" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="a5" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="a5" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="a5" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="a5" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="a6" data-weight="1.2">
                    <label class="q-label">I feel compassion for those who are suffering.</label>
                    <div class="range-container">
                        <span class="range-label">Detached</span>
                        <input type="range" name="a6" min="1" max="10" value="5" oninput="updateOutput('a6-out', this.value)">
                        <span class="range-label">Empathetic</span>
                    </div>
                    <output id="a6-out">5</output>
                </div>

                <div class="question-card" data-qid="a7" data-weight="1.0">
                    <label class="q-label">Expectations of others</label>
                    <div class="toggle-group">
                        <input type="radio" id="a7-recip" name="a7" value="1">
                        <label for="a7-recip" class="toggle-btn">Transactional</label>
                        
                        <input type="radio" id="a7-uncon" name="a7" value="5">
                        <label for="a7-uncon" class="toggle-btn">Unconditional</label>
                    </div>
                </div>

                <div class="question-card" data-qid="a8" data-weight="1.3">
                    <label class="q-label">I sympathize with others' feelings, even if I don't agree.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="a8" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="a8" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="a8" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="a8" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="a8" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>
            </section>

            <section class="quiz-section" aria-labelledby="neuro-heading">
                <h2 id="neuro-heading">Part 5: Emotional Stability</h2>
                <p class="section-desc">Handling stress, anxiety, and pressure.</p>

                <div class="question-card" data-qid="n1" data-reverse="true" data-weight="2.0" style="border-left: 4px solid #d9534f;">
                    <label class="q-label">Unexpected guests don't faze me.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="n1" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="n1" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="n1" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="n1" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="n1" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="n2" data-weight="1.5">
                    <label class="q-label">I worry about small things more than I should.</label>
                    <div class="range-container">
                        <span class="range-label">Calm</span>
                        <input type="range" name="n2" min="1" max="10" value="5" oninput="updateOutput('n2-out', this.value)">
                        <span class="range-label">Highly Worried</span>
                    </div>
                    <output id="n2-out">5</output>
                </div>

                <div class="question-card" data-qid="n3" data-reverse="true" data-weight="1.8">
                    <label class="q-label">I remain calm under pressure during conflicts.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="n3" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="n3" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="n3" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="n3" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="n3" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="n4" data-weight="1.2">
                    <label class="q-label">I get stressed easily in unfamiliar social situations.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="n4" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="n4" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="n4" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="n4" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="n4" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                <div class="question-card" data-qid="n5" data-reverse="true" data-weight="1.5">
                    <label class="q-label">Reaction to New Situations</label>
                    <div class="toggle-group">
                        <input type="radio" id="n5-anx" name="n5" value="5">
                        <label for="n5-anx" class="toggle-btn">Anxious</label>
                        
                        <input type="radio" id="n5-calm" name="n5" value="1">
                        <label for="n5-calm" class="toggle-btn">Calm</label>
                    </div>
                </div>

                <div class="question-card" data-qid="n6" data-weight="1.2">
                    <label class="q-label">Negative events affect me more deeply than positive ones.</label>
                    <div class="range-container">
                        <span class="range-label">Resilient</span>
                        <input type="range" name="n6" min="1" max="10" value="5" oninput="updateOutput('n6-out', this.value)">
                        <span class="range-label">Sensitive</span>
                    </div>
                    <output id="n6-out">5</output>
                </div>

                <div class="question-card" data-qid="n7" data-weight="1.0">
                    <label class="q-label">I tend to ruminate on past mistakes.</label>
                    <div class="likert-scale">
                         <label><input type="radio" name="n7" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="n7" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="n7" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="n7" value="4"><span>Agree</span></label>
                        <label><input type="radio" name="n7" value="5"><span>Strongly Agree</span></label>
                    </div>
                </div>

                 <div class="question-card" data-qid="n8" data-reverse="true" data-weight="1.8">
                    <label class="q-label">I handle criticism well without getting defensive.</label>
                    <div class="likert-scale">
                        <label><input type="radio" name="n8" value="1" required><span>Strongly Disagree</span></label>
                        <label><input type="radio" name="n8" value="2"><span>Disagree</span></label>
                        <label><input type="radio" name="n8" value="3"><span>Neutral</span></label>
                        <label><input type="radio" name="n8" value="4"><span>Agree</span></label>
                        <label>